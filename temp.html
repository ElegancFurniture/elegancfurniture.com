<!DOCTYPE html>
<html>

<head>
	<title>LocalStorage Example</title>
</head>

<body>
	<input type="text" id="nameInput" placeholder="Enter your name">
	<button onclick="storeName()">Save Name</button>
	<p id="storedName"></p>
	<p id="clockdiv"></p>

	<script>
		function storeName() {
			const name = document.getElementById("nameInput").value;
			localStorage.setItem("userName", name); // Store the name
			displayStoredName();
		}

		function displayStoredName() {
			const storedName = localStorage.getItem("userName"); // Retrieve the name
			if (storedName) {
				document.getElementById("storedName").innerText = "Hello, " + storedName + "!";
			} else {
				document.getElementById("storedName").innerText = "No name stored yet.";
			}
		}

		// Display the stored name on page load
		displayStoredName();
		const timerValue = 20; // this value is in seconds

		let time = localStorage.getItem('saved_timer');
		if (time == null) {
			const saved_timer = new Date().getTime() + (timerValue * 1000);
			localStorage.setItem('saved_timer', saved_timer);
			time = saved_timer;
		}

		const timerID = setInterval(() => {
			const now = new Date().getTime();
			const difference = time - now;


			const totalSeconds = Math.floor(difference / 1000);
			const minutes = Math.floor(totalSeconds / 60);
			const seconds = totalSeconds % 60;
			document.querySelector("#clockdiv").innerText = 'Time Left: ' + minutes + ':' + ((seconds < 10) ? '0' + seconds : seconds);

			if (totalSeconds <= 0) {
				clearInterval(timerID);
				localStorage.removeItem('saved_timer');
			}
		}, 1000);
	</script>
</body>

</html>